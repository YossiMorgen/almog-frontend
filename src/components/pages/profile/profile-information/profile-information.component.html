<!-- Personal Information -->
<mat-card>
  <mat-card-header>
    <mat-card-title>
      <mat-icon>person</mat-icon>
      <span i18n="@@profile.personalInfo.title">Personal Information</span>
    </mat-card-title>
  </mat-card-header>
  
  <mat-card-content>
    <form [formGroup]="profileForm" (ngSubmit)="updateProfile()">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label i18n="@@profile.personalInfo.fullName">Full Name</mat-label>
        <input matInput formControlName="name" placeholder="Enter your full name" i18n-placeholder="@@profile.personalInfo.fullNamePlaceholder">
        <mat-error *ngIf="profileForm.get('name')?.hasError('required')" i18n="@@profile.personalInfo.nameRequired">
          Name is required
        </mat-error>
        <mat-error *ngIf="profileForm.get('name')?.hasError('maxlength')" i18n="@@profile.personalInfo.nameMaxLength">
          Name must be less than 200 characters
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label i18n="@@profile.personalInfo.email">Email</mat-label>
        <input matInput formControlName="email" placeholder="Enter your email" i18n-placeholder="@@profile.personalInfo.emailPlaceholder" readonly>
        <mat-icon matSuffix>lock</mat-icon>
        <mat-hint i18n="@@profile.personalInfo.emailHint">Email cannot be changed here. Use the Security tab to update email.</mat-hint>
      </mat-form-field>

      <div class="form-actions">
        <button mat-raised-button color="primary" type="submit" 
                [disabled]="profileForm.invalid || updating">
          <mat-icon *ngIf="updating">hourglass_empty</mat-icon>
          <mat-icon *ngIf="!updating">save</mat-icon>
          <span *ngIf="updating" i18n="@@profile.personalInfo.updating">Updating...</span>
          <span *ngIf="!updating" i18n="@@profile.personalInfo.updateProfile">Update Profile</span>
        </button>
      </div>
    </form>
  </mat-card-content>
</mat-card>

<!-- Roles and Permissions -->
<mat-card *ngIf="userRoles.length > 0 || userPermissions.length > 0">
  <mat-card-header>
    <mat-card-title>
      <mat-icon>admin_panel_settings</mat-icon>
      <span i18n="@@profile.rolesPermissions.title">Roles & Permissions</span>
    </mat-card-title>
  </mat-card-header>
  
  <mat-card-content>
    <div class="roles-section" *ngIf="userRoles.length > 0">
      <h4 i18n="@@profile.rolesPermissions.roles">Roles</h4>
      <div class="chips-container">
        <mat-chip-set>
          <mat-chip *ngFor="let role of userRoles" color="primary" selected>
            <mat-icon matChipAvatar>badge</mat-icon>
            {{ role }}
          </mat-chip>
        </mat-chip-set>
      </div>
    </div>

    <div class="permissions-section" *ngIf="userPermissions.length > 0">
      <h4 i18n="@@profile.rolesPermissions.permissions">Permissions</h4>
      <div class="chips-container">
        <mat-chip-set>
          <mat-chip *ngFor="let permission of userPermissions" color="accent" selected>
            <mat-icon matChipAvatar>security</mat-icon>
            {{ permission }}
          </mat-chip>
        </mat-chip-set>
      </div>
    </div>
  </mat-card-content>
</mat-card>
